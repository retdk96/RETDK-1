
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°æ¸¸æˆ</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
        padding: 20px;
      }

      .game-container {
        background-color: rgba(0, 0, 0, 0.8);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        overflow: hidden;
        width: 100%;
        max-width: 800px;
        padding: 20px;
        color: white;
      }

      header {
        text-align: center;
        margin-bottom: 20px;
      }

      h1 {
        font-size: 2.8rem;
        color: #ffde59;
        text-shadow: 0 0 10px rgba(255, 222, 89, 0.7);
        margin-bottom: 10px;
        letter-spacing: 2px;
      }

      .game-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
      }

      .score-container,
      .high-score-container {
        font-size: 1.4rem;
        font-weight: bold;
      }

      .score-value,
      .high-score-value {
        color: #4caf50;
        font-size: 1.8rem;
        display: inline-block;
        min-width: 50px;
      }

      .game-area {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      canvas {
        background-color: #111;
        border-radius: 8px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
        display: block;
      }

      .controls {
        margin-top: 20px;
        display: flex;
        gap: 15px;
      }

      .btn {
        padding: 12px 25px;
        font-size: 1.1rem;
        font-weight: bold;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        background: linear-gradient(to right, #ffde59, #ff8c00);
        color: #222;
        transition: all 0.3s ease;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
      }

      .btn:active {
        transform: translateY(1px);
      }

      .btn:disabled {
        background: #777;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .instructions {
        margin-top: 25px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        font-size: 1rem;
        line-height: 1.6;
      }

      .instructions h2 {
        color: #ffde59;
        margin-bottom: 10px;
        text-align: center;
      }

      .instructions ul {
        padding-left: 20px;
      }

      .instructions li {
        margin-bottom: 8px;
      }

      .game-over {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.9);
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        display: none;
        z-index: 10;
        box-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
        border: 2px solid #ff3333;
      }

      .game-over h2 {
        color: #ff3333;
        font-size: 2.5rem;
        margin-bottom: 20px;
      }

      .final-score {
        font-size: 1.8rem;
        margin-bottom: 25px;
      }

      @media (max-width: 600px) {
        .game-container {
          padding: 10px;
        }

        h1 {
          font-size: 2rem;
        }

        .game-info {
          flex-direction: column;
          gap: 10px;
          align-items: center;
        }

        .controls {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <header>
        <h1>åƒåœ¾å°æ¸¸æˆ</h1>
      </header>

      <div class="game-info">
        <div class="score-container">
          å½“å‰åˆ†æ•°: <span id="score" class="score-value">0</span>
        </div>
        <div class="high-score-container">
          æœ€é«˜åˆ†: <span id="high-score" class="high-score-value">0</span>
        </div>
      </div>

      <div class="game-area">
        <canvas id="gameCanvas" width="600" height="400"></canvas>

        <div class="controls">
          <button id="startBtn" class="btn">å¼€å§‹æ¸¸æˆ</button>
          <button id="pauseBtn" class="btn" disabled>æš‚åœ</button>
          <button id="restartBtn" class="btn">é‡æ–°å¼€å§‹</button>
        </div>

        <div class="instructions"
          <h2>æ¸¸æˆè¯´æ˜</h2>
          <ul>
            <li>ä½¿ç”¨ <strong>â†‘ â† â†“ â†’</strong> æ–¹å‘é”®æ§åˆ¶ç§»åŠ¨</li>
            <li>åƒåˆ°é£Ÿç‰©ï¼ˆçº¢è‰²æ–¹å—ï¼‰åï¼Œè›‡èº«ä¼šå˜é•¿ï¼Œåˆ†æ•°+1</li>
            <li>æ’åˆ°å¢™å£æˆ–è‡ªå·±çš„èº«ä½“ï¼Œæ¸¸æˆç»“æŸ</li>
            <li>å°½å¯èƒ½åƒåˆ°æ›´å¤šçš„é£Ÿç‰©ï¼ŒæŒ‘æˆ˜æœ€é«˜åˆ†</li>
          </ul>
          <hr>
         <div style="text-align: center;" <a href="https://imgloc.com/image/2pLMq"><img 
            src="https://i.imgs.ovh/2025/07/30/2pLMq.jpeg"
             alt="2pLMq.jpeg" border="0"
              height="270"
                width="220"></a>
                <p><strong>è”ç³»ä½œè€…æ±‡æŠ¥bug â†‘ </strong></p>
            <p>Â© 2025 æ¯ç§’23å…†å­—èŠ‚. ä¿ç•™æ‰€æœ‰æƒåˆ©</p>
        <p>ä½œè€…é‚®ç®±ï¼š2309194142@qq.com Â· ç½‘ç«™ä½œè€…QQï¼š2309194142</p></div>
        </div>
      </div>
      </div>
    </div>

    <div id="gameOver" class="game-over">
      <h2>èœğŸ‘</h2>
      <div class="final-score">æœ€ç»ˆå¾—åˆ†: <span id="finalScore">0</span></div>
      <button id="playAgainBtn" class="btn">å†ç©ä¸€æ¬¡</button>
    </div>


    <script>
      // è·å–Canvaså…ƒç´ å’Œä¸Šä¸‹æ–‡
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");

      // æ¸¸æˆå˜é‡
      const gridSize = 20; // ç½‘æ ¼å¤§å°
      const tileCount = canvas.width / gridSize; // æ¯è¡Œ/åˆ—æ ¼å­æ•°
      let snake = [];
      let food = {};
      let dx = gridSize; // è›‡çš„åˆå§‹æ°´å¹³ç§»åŠ¨é€Ÿåº¦
      let dy = 0; // è›‡çš„åˆå§‹å‚ç›´ç§»åŠ¨é€Ÿåº¦
      let score = 0;
      let highScore = localStorage.getItem("snakeHighScore") || 0;
      let gameRunning = false;
      let gameLoop;

      // DOMå…ƒç´ 
      const scoreElement = document.getElementById("score");
      const highScoreElement = document.getElementById("high-score");
      const finalScoreElement = document.getElementById("finalScore");
      const startBtn = document.getElementById("startBtn");
      const pauseBtn = document.getElementById("pauseBtn");
      const restartBtn = document.getElementById("restartBtn");
      const playAgainBtn = document.getElementById("playAgainBtn");
      const gameOverElement = document.getElementById("gameOver");

      // åˆå§‹åŒ–æ¸¸æˆ
      function initGame() {
        // åˆå§‹åŒ–è›‡
        snake = [
          { x: 10 * gridSize, y: 10 * gridSize }, // è›‡å¤´
          { x: 9 * gridSize, y: 10 * gridSize }, // è›‡èº«
          { x: 8 * gridSize, y: 10 * gridSize }, // è›‡èº«
        ];

        // ç”Ÿæˆé£Ÿç‰©
        generateFood();

        // é‡ç½®ç§»åŠ¨æ–¹å‘
        dx = gridSize;
        dy = 0;

        // é‡ç½®åˆ†æ•°
        score = 0;
        updateScore();

        // æ›´æ–°æœ€é«˜åˆ†æ˜¾ç¤º
        highScoreElement.textContent = highScore;

        // éšè—æ¸¸æˆç»“æŸç•Œé¢
        gameOverElement.style.display = "none";
      }

      // ç”Ÿæˆé£Ÿç‰©
      function generateFood() {
        // ç¡®ä¿é£Ÿç‰©ä¸ä¼šå‡ºç°åœ¨è›‡èº«ä¸Š
        let foodOnSnake;
        do {
          foodOnSnake = false;
          food = {
            x: Math.floor(Math.random() * (tileCount - 2) + 1) * gridSize,
            y: Math.floor(Math.random() * (tileCount - 2) + 1) * gridSize,
          };

          // æ£€æŸ¥é£Ÿç‰©æ˜¯å¦å‡ºç°åœ¨è›‡èº«ä¸Š
          for (let segment of snake) {
            if (segment.x === food.x && segment.y === food.y) {
              foodOnSnake = true;
              break;
            }
          }
        } while (foodOnSnake);
      }

      // ç»˜åˆ¶æ¸¸æˆ
      function drawGame() {
        // æ¸…é™¤ç”»å¸ƒ
        ctx.fillStyle = "#111";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ç»˜åˆ¶å¢™ä½“
        ctx.fillStyle = "#444";
        ctx.fillRect(0, 0, canvas.width, gridSize); // ä¸Šå¢™
        ctx.fillRect(0, 0, gridSize, canvas.height); // å·¦å¢™
        ctx.fillRect(canvas.width - gridSize, 0, gridSize, canvas.height); // å³å¢™
        ctx.fillRect(0, canvas.height - gridSize, canvas.width, gridSize); // ä¸‹å¢™

        // ç»˜åˆ¶è›‡
        snake.forEach((segment, index) => {
          if (index === 0) {
            // è›‡å¤´
            ctx.fillStyle = "#4caf50";
          } else {
            // è›‡èº«
            const greenValue = 150 - Math.min(15 * index, 100);
            ctx.fillStyle = `rgb(50, ${greenValue}, 50)`;
          }
          ctx.fillRect(segment.x, segment.y, gridSize - 1, gridSize - 1);

          // è›‡å¤´çœ¼ç›
          if (index === 0) {
            ctx.fillStyle = "#000";
            // æ ¹æ®æ–¹å‘ç»˜åˆ¶çœ¼ç›ä½ç½®
            if (dx > 0) {
              // å‘å³
              ctx.fillRect(segment.x + 13, segment.y + 5, 3, 3);
              ctx.fillRect(segment.x + 13, segment.y + 12, 3, 3);
            } else if (dx < 0) {
              // å‘å·¦
              ctx.fillRect(segment.x + 4, segment.y + 5, 3, 3);
              ctx.fillRect(segment.x + 4, segment.y + 12, 3, 3);
            } else if (dy > 0) {
              // å‘ä¸‹
              ctx.fillRect(segment.x + 5, segment.y + 13, 3, 3);
              ctx.fillRect(segment.x + 12, segment.y + 13, 3, 3);
            } else {
              // å‘ä¸Š
              ctx.fillRect(segment.x + 5, segment.y + 4, 3, 3);
              ctx.fillRect(segment.x + 12, segment.y + 4, 3, 3);
            }
          }
        });

        // ç»˜åˆ¶é£Ÿç‰©
        ctx.fillStyle = "#ff5252";
        ctx.beginPath();
        ctx.arc(
          food.x + gridSize / 2,
          food.y + gridSize / 2,
          gridSize / 2 - 2,
          0,
          Math.PI * 2
        );
        ctx.fill();
      }

      // ç§»åŠ¨è›‡
      function moveSnake() {
        // åˆ›å»ºæ–°çš„è›‡å¤´
        const head = { x: snake[0].x + dx, y: snake[0].y + dy };

        // æ£€æŸ¥æ˜¯å¦æ’å¢™
        if (
          head.x < gridSize ||
          head.x >= canvas.width - gridSize ||
          head.y < gridSize ||
          head.y >= canvas.height - gridSize
        ) {
          gameOver();
          return;
        }

        // æ£€æŸ¥æ˜¯å¦æ’åˆ°è‡ªå·±
        for (let i = 0; i < snake.length; i++) {
          if (head.x === snake[i].x && head.y === snake[i].y) {
            gameOver();
            return;
          }
        }

        // åœ¨å¼€å¤´æ·»åŠ æ–°çš„è›‡å¤´
        snake.unshift(head);

        // æ£€æŸ¥æ˜¯å¦åƒåˆ°é£Ÿç‰©
        if (head.x === food.x && head.y === food.y) {
          // åƒåˆ°é£Ÿç‰©ï¼Œå¢åŠ åˆ†æ•°
          score++;
          updateScore();

          // ç”Ÿæˆæ–°é£Ÿç‰©
          generateFood();
        } else {
          // æ²¡åƒåˆ°é£Ÿç‰©ï¼Œç§»é™¤è›‡å°¾
          snake.pop();
        }
      }

      // æ›´æ–°åˆ†æ•°æ˜¾ç¤º
      function updateScore() {
        scoreElement.textContent = score;

        // æ›´æ–°æœ€é«˜åˆ†
        if (score > highScore) {
          highScore = score;
          highScoreElement.textContent = highScore;
          localStorage.setItem("snakeHighScore", highScore);
        }
      }

      // æ¸¸æˆä¸»å¾ªç¯
      function gameStep() {
        moveSnake();
        drawGame();
      }

      // å¼€å§‹æ¸¸æˆ
      function startGame() {
        if (!gameRunning) {
          gameRunning = true;
          gameLoop = setInterval(gameStep, 150);
          startBtn.disabled = true;
          pauseBtn.disabled = false;
        }
      }

      // æš‚åœæ¸¸æˆ
      function pauseGame() {
        if (gameRunning) {
          clearInterval(gameLoop);
          gameRunning = false;
          pauseBtn.textContent = "ç»§ç»­";
        } else {
          gameRunning = true;
          gameLoop = setInterval(gameStep, 150);
          pauseBtn.textContent = "æš‚åœ";
        }
      }

      // æ¸¸æˆç»“æŸ
      function gameOver() {
        clearInterval(gameLoop);
        gameRunning = false;
        startBtn.disabled = false;
        pauseBtn.disabled = true;
        pauseBtn.textContent = "æš‚åœ";

        // æ˜¾ç¤ºæœ€ç»ˆå¾—åˆ†
        finalScoreElement.textContent = score;
        gameOverElement.style.display = "block";
      }

      // é”®ç›˜æ§åˆ¶
      document.addEventListener("keydown", (e) => {
        // é˜²æ­¢æ–¹å‘é”®æ»šåŠ¨é¡µé¢
        if ([37, 38, 39, 40].includes(e.keyCode)) {
          e.preventDefault();
        }

        // æ–¹å‘é”®æ§åˆ¶
        switch (e.keyCode) {
          case 37: // å·¦ç®­å¤´
            if (dx === 0) {
              // é˜²æ­¢180åº¦è½¬å¼¯
              dx = -gridSize;
              dy = 0;
            }
            break;
          case 38: // ä¸Šç®­å¤´
            if (dy === 0) {
              dx = 0;
              dy = -gridSize;
            }
            break;
          case 39: // å³ç®­å¤´
            if (dx === 0) {
              dx = gridSize;
              dy = 0;
            }
            break;
          case 40: // ä¸‹ç®­å¤´
            if (dy === 0) {
              dx = 0;
              dy = gridSize;
            }
            break;
          case 32: // ç©ºæ ¼é”®
            if (gameRunning) {
              pauseGame();
            } else {
              startGame();
            }
            break;
        }
      });

      // æŒ‰é’®äº‹ä»¶ç›‘å¬
      startBtn.addEventListener("click", startGame);
      pauseBtn.addEventListener("click", pauseGame);
      restartBtn.addEventListener("click", () => {
        clearInterval(gameLoop);
        initGame();
        gameRunning = false;
        startBtn.disabled = false;
        pauseBtn.disabled = true;
        pauseBtn.textContent = "æš‚åœ";
        drawGame();
      });
      playAgainBtn.addEventListener("click", () => {
        initGame();
        drawGame();
      });

      // åˆå§‹åŒ–æ¸¸æˆ
      initGame();
      drawGame();
    </script>
  </body>
</html>
